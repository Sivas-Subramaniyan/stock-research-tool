# Installation Guide

## Required Installations

### Python Packages

Install all required Python packages:

```bash
pip install -r requirements.txt
```

This will install:
- `fastapi` - Web framework for building APIs
- `uvicorn` - ASGI server for FastAPI
- `pydantic` - Data validation
- `requests` - HTTP library
- `pandas` - Data manipulation
- `openai` - OpenAI API client
- `langgraph` - Workflow orchestration
- `langchain` - LangChain integration
- `python-multipart` - Form data support

### System Requirements

- **Python**: 3.8 or higher
- **Operating System**: Windows, macOS, or Linux

### API Keys

Set the following environment variables:

#### Option 1: Environment Variables (Recommended)

**Windows (PowerShell):**
```powershell
$env:TAVILY_API_KEY="your-tavily-key"
$env:OPENAI_API_KEY="your-openai-key"
```

**Windows (Command Prompt):**
```cmd
set TAVILY_API_KEY=your-tavily-key
set OPENAI_API_KEY=your-openai-key
```

**Linux/macOS:**
```bash
export TAVILY_API_KEY="your-tavily-key"
export OPENAI_API_KEY="your-openai-key"
```

#### Option 2: Update in Code

Edit `api.py` and update these lines:
```python
TAVILY_API_KEY = os.getenv("TAVILY_API_KEY", "your-tavily-key-here")
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY", "your-openai-key-here")
```

### Required Files

Ensure these files exist in the project directory:

1. **`ranked_companies.csv`** - Company data file
   - Generated by `score_companies.py`
   - Contains ranked companies with financial data

2. **`screener_results_cleaned.xlsx`** (optional)
   - Source data for scoring
   - Only needed if regenerating ranked_companies.csv

### Directory Structure

Create these directories if they don't exist (they will be created automatically):

- `research_output/` - Stores research JSON files
- `reports/` - Stores markdown reports
- `frontend/` - Frontend files

## Verification

### Test API Installation

1. Start the API server:
```bash
python run_api.py
```

2. Open browser and navigate to:
   - API Docs: http://localhost:8000/docs
   - Root: http://localhost:8000

3. Test endpoint:
```bash
curl http://localhost:8000/
```

### Test Frontend

1. Start API server (see above)

2. Open `frontend/index.html` in your browser

3. Verify:
   - Companies list loads
   - Algorithm tab displays
   - Research form is functional

## Troubleshooting

### Import Errors

If you get import errors:
```bash
pip install --upgrade -r requirements.txt
```

### Port Already in Use

If port 8000 is already in use:
```bash
# Change port in run_api.py or use:
export API_PORT=8001
python run_api.py
```

### API Keys Not Working

1. Verify keys are correct
2. Check environment variables are set:
```bash
# Windows PowerShell
echo $env:OPENAI_API_KEY

# Linux/macOS
echo $OPENAI_API_KEY
```

3. Update API keys in code if needed (see Option 2 above)

### CORS Errors

If you see CORS errors in browser console:
1. Update `allow_origins` in `api.py` CORS middleware
2. Ensure frontend URL matches allowed origins

### Missing ranked_companies.csv

If you get "CSV file not found" error:

1. Run scoring script:
```bash
python score_companies.py
```

2. Verify `ranked_companies.csv` is created in project directory

## Next Steps

After installation:

1. ✅ Install dependencies: `pip install -r requirements.txt`
2. ✅ Set API keys (environment variables or in code)
3. ✅ Verify `ranked_companies.csv` exists
4. ✅ Start API server: `python run_api.py`
5. ✅ Open `frontend/index.html` in browser
6. ✅ Test the application

## Production Deployment

For production deployment, see `README_API.md` for deployment instructions.

